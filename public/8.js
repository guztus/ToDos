(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{262:function(t,e,n){"use strict";n.r(e);var s=n(2),o=n(38),r=n.n(o),a=(n(62),n(22)),i=n.n(a),u={name:"arsti",components:{TheMask:r.a},data:function(){return{arsti:null,pers_kods:null,mode:0,person:null}},methods:{deleteCheck:function(t){var e=this;i.a.question({timeout:2e4,close:!1,overlay:!0,displayMode:"once",id:"question",zindex:999,title:"Dzēst",message:"Vai jūs tiešām vēlaties dzēst šo personu no sertificēto ārstu saraksta?",position:"center",buttons:[["<button><b>Jā</b></button>",function(n,s){n.hide({transitionOut:"fadeOut"},s,"button"),e.delete(t)}],["<button>Nē</button>",function(t,e){t.hide({transitionOut:"fadeOut"},e,"button")}]]})},delete:function(t){var e=this;axios.post("/api/arsts-dzest",{sessionId:sessionStorage.getItem("sessionId"),id:t.id}).then((function(t){console.log(t),void 0!==t.data.Errors?s.a.error(t.data.Errors[0].ClientMessage):(s.a.success("Sertificētais ārsts dzēsts veiksmīgi."),e.mode=0,e.load(),console.log(t))})).catch((function(t){return console.log(t)}))},add:function(){var t=this;axios.post("/api/arsts-jauns",{sessionId:sessionStorage.getItem("sessionId"),gprs_id:this.person.id}).then((function(e){console.log(e),void 0!==e.data.Errors?s.a.error(e.data.Errors[0].ClientMessage):(s.a.success("Sertificētais ārsts pievienots veiksmīgi."),t.mode=0,t.load(),console.log(e))})).catch((function(t){return console.log(t)}))},cancel:function(){this.mode=0,this.pers_kods=null,this.person=null},persCode:function(){return this.pers_kods.replace("-","")},onSubmit:function(){var t=this;event.preventDefault(),axios.post("/api/personas-dati",{sessionId:sessionStorage.getItem("sessionId"),pers_kods:this.persCode(),pap_dati:!1}).then((function(e){void 0!==e.data.Errors?s.a.error(e.data.Errors[0].ClientMessage):(t.person=e.data.rowset[0],t.mode=2)})).catch((function(t){return console.log(t)}))},load:function(){var t=this;axios.post("api/arstu-saraksts",{sessionId:sessionStorage.getItem("sessionId")}).then((function(e){void 0!==e.data.Errors?s.a.error(e.data.Errors[0].ClientMessage):t.arsti=e.data.rowset})).catch((function(t){return console.log(t)}))}},mounted:function(){this.load()}},c=n(3),l={name:"ArstiView",components:{Arsti:Object(c.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"arsti"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.mode,expression:"mode == 0"}],staticClass:"row saraksts"},[n("div",{staticClass:"col-md-8 offset-2"},[n("table",{staticClass:"table table-bordered"},[t._m(0),t._v(" "),t._l(t.arsti,(function(e,s){return n("tr",{key:s},[n("td",[n("b-button",{attrs:{variant:"danger"},on:{click:function(n){return t.deleteCheck(e)}}},[t._v("Dzēst")])],1),t._v(" "),n("td",[t._v(t._s(e.vards+" "+e.uzvards))]),t._v(" "),n("td",[t._v(t._s(e.pk))])])})),t._v(" "),null==t.arsti||null==t.arsti?n("tr",[n("td",{attrs:{colspan:"3"}},[t._v("Nav datu")])]):t._e()],2),t._v(" "),n("b-button",{staticClass:"submit-button",on:{click:function(e){t.mode=1}}},[t._v("Pievienot sertificēto ārstu")])],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.mode,expression:"mode == 1"}],staticClass:"row meklet"},[n("div",{staticClass:"col-md-8 offset-2"},[n("b-form",{on:{submit:t.onSubmit}},[n("b-form-group",{attrs:{id:"input-group-code",label:"Personas kods:","label-for":"input-code-one"}},[n("b-form-input",{directives:[{name:"mask",rawName:"v-mask",value:"######-#####",expression:"'######-#####'"}],attrs:{id:"input-code-one",placeholder:"123456-12345",maxlength:"12",required:"",oninvalid:"this.setCustomValidity('Lūdzu aizpildiet šo lauku.')",onchange:"this.setCustomValidity('')"},model:{value:t.pers_kods,callback:function(e){t.pers_kods=e},expression:"pers_kods"}})],1),t._v(" "),n("b-button",{staticClass:"submit-button",attrs:{type:"submit"}},[t._v("Meklēt")])],1)],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2==t.mode,expression:"mode == 2"}],staticClass:"row saraksts"},[n("div",{staticClass:"col-md-8 offset-2"},[null!==t.person?n("table",{staticClass:"table table-bordered"},[t._m(1),t._v(" "),n("tr",[n("td",[t._v(t._s(t.person.vards+" "+t.person.uzvards))]),t._v(" "),n("td",[t._v(t._s(t.person.pk))])]),t._v(" "),null==t.person?n("tr",[n("td",{attrs:{colspan:"3"}},[t._v("Nav datu")])]):t._e()]):t._e(),t._v(" "),n("b-button",{staticClass:"submit-button",on:{click:t.add}},[t._v("Pievienot")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:t.cancel}},[t._v("Atcelt")])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{staticStyle:{width:"25px"}}),this._v(" "),e("th",[this._v("Pilns vārds")]),this._v(" "),e("th",[this._v("Personas kods")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Pilns vārds")]),this._v(" "),e("th",[this._v("Personas kods")])])])}],!1,null,null,null).exports},mounted:function(){this.$store.state.loggedIn||(window.location.href="/#/",location.reload())}},d=Object(c.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("Arsti")],1)}),[],!1,null,null,null);e.default=d.exports},38:function(t,e,n){t.exports=function(t){function e(s){if(n[s])return n[s].exports;var o=n[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,s){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=".",e(e.s=10)}([function(t,e){t.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(t){return t.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(t){return t.toLocaleLowerCase()}},"!":{escape:!0}}},function(t,e,n){"use strict";function s(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}var o=n(2),r=n(0),a=n.n(r);e.a=function(t,e){var r=e.value;if((Array.isArray(r)||"string"==typeof r)&&(r={mask:r,tokens:a.a}),"INPUT"!==t.tagName.toLocaleUpperCase()){var i=t.getElementsByTagName("input");if(1!==i.length)throw new Error("v-mask directive requires 1 input, found "+i.length);t=i[0]}t.oninput=function(e){if(e.isTrusted){var a=t.selectionEnd,i=t.value[a-1];for(t.value=n.i(o.a)(t.value,r.mask,!0,r.tokens);a<t.value.length&&t.value.charAt(a-1)!==i;)a++;t===document.activeElement&&(t.setSelectionRange(a,a),setTimeout((function(){t.setSelectionRange(a,a)}),0)),t.dispatchEvent(s("input"))}};var u=n.i(o.a)(t.value,r.mask,!0,r.tokens);u!==t.value&&(t.value=u,t.dispatchEvent(s("input")))}},function(t,e,n){"use strict";var s=n(6),o=n(5);e.a=function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments[3];return Array.isArray(e)?n.i(o.a)(s.a,e,a)(t,e,r,a):n.i(s.a)(t,e,r,a)}},function(t,e,n){"use strict";function s(t){t.component(u.a.name,u.a),t.directive("mask",a.a)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n.n(o),a=n(1),i=n(7),u=n.n(i);n.d(e,"TheMask",(function(){return u.a})),n.d(e,"mask",(function(){return a.a})),n.d(e,"tokens",(function(){return r.a})),n.d(e,"version",(function(){return c}));var c="0.11.1";e.default=s,"undefined"!=typeof window&&window.Vue&&window.Vue.use(s)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),o=n(0),r=n.n(o),a=n(2);e.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return r.a}}},directives:{mask:s.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(t){t!==this.lastValue&&(this.display=t)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(t){t.isTrusted||this.refresh(t.target.value)},refresh:function(t){this.display=t,(t=n.i(a.a)(t,this.mask,this.masked,this.tokens))!==this.lastValue&&(this.lastValue=t,this.$emit("input",t))}}}},function(t,e,n){"use strict";e.a=function(t,e,n){return e=e.sort((function(t,e){return t.length-e.length})),function(s,o){for(var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=0;a<e.length;){var i=e[a];a++;var u=e[a];if(!(u&&t(s,u,!0,n).length>i.length))return t(s,i,r,n)}return""}}},function(t,e,n){"use strict";e.a=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments[3];t=t||"",e=e||"";for(var o=0,r=0,a="";o<e.length&&r<t.length;){var i=s[l=e[o]],u=t[r];i&&!i.escape?(i.pattern.test(u)&&(a+=i.transform?i.transform(u):u,o++),r++):(i&&i.escape&&(l=e[++o]),n&&(a+=l),u===l&&r++,o++)}for(var c="";o<e.length&&n;){var l;if(s[l=e[o]]){c="";break}c+=l,o++}return a+c}},function(t,e,n){var s=n(8)(n(4),n(9),null,null);t.exports=s.exports},function(t,e){t.exports=function(t,e,n,s){var o,r=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(o=t,r=t.default);var i="function"==typeof r?r.options:r;if(e&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns),n&&(i._scopeId=n),s){var u=i.computed||(i.computed={});Object.keys(s).forEach((function(t){var e=s[t];u[t]=function(){return e}}))}return{esModule:o,exports:r,options:i}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"mask",rawName:"v-mask",value:t.config,expression:"config"}],attrs:{type:"text"},domProps:{value:t.display},on:{input:t.onInput}})},staticRenderFns:[]}},function(t,e,n){t.exports=n(3)}])}}]);
//# sourceMappingURL=8.js.map