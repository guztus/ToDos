(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{259:function(t,e,s){"use strict";s.r(e);var o=s(2),i={name:"Kiest",data:function(){return{kiest_nos:this.$store.state.kiest_nos,kiest_id:""}},methods:{chooseKiest:function(){var t=this;event.preventDefault(),this.$store.state.kiest.forEach((function(e){e.nos==t.kiest_nos&&axios.post("api/update-kiest",{sessionId:sessionStorage.getItem("sessionId"),kiest_id:e.id}).then((function(s){void 0!==s.data.Errors?o.a.error(s.data.Errors[0].ClientMessage):(t.$store.commit("setKiest_nos",t.kiest_nos),t.$store.commit("setKiest_id",e.id),o.a.success("Iestāde izvēlēta veiksmīgi"),window.location.href="/#/person-search")})).catch((function(t){return console.log(t)}))}))},selected:function(t){if(t==this.$store.state.kiest_nos)return!0}},mounted:function(){1==this.$store.state.kiest.length&&(window.location.href="/#/person-search")}},n=s(3),a={name:"KiestView",components:{Kiest:Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form"},[s("div",{staticClass:"col-md-6 offset-md-3"},[s("b-form",{on:{submit:t.chooseKiest}},[s("b-form-group",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.kiest_nos,expression:"kiest_nos"}],staticClass:"custom-select",attrs:{name:"kiest",id:"kiest-select"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.kiest_nos=e.target.multiple?s:s[0]}}},[s("option",{attrs:{selected:"",value:""}},[t._v("Izvēlēties iestādi")]),t._v(" "),t._l(t.$store.state.kiest,(function(e){return s("option",{key:e.id,domProps:{selected:t.selected(e.nos),value:e.nos}},[t._v(t._s(e.nos))])}))],2)]),t._v(" "),s("b-button",{staticClass:"submit-button",attrs:{type:"submit"}},[t._v("Izvēlēties iestādi")])],1)],1)])}),[],!1,null,null,null).exports},mounted:function(){this.$store.state.loggedIn||(window.location.href="/#/",location.reload())}},r=Object(n.a)(a,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"content"},[e("Kiest")],1)}),[],!1,null,null,null);e.default=r.exports}}]);
//# sourceMappingURL=10.js.map